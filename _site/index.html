<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Comp. Soc. Sci. for Sustainability (EBS 181/281) - Computational Social Science for Sustainability (EBS 181/281)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Comp. Soc. Sci. for Sustainability (EBS 181/281)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./notes"> 
<span class="menu-text">Course Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./lectures"> 
<span class="menu-text">Lectures</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#course-overview" id="toc-course-overview" class="nav-link active" data-scroll-target="#course-overview">Course overview</a>
  <ul class="collapse">
  <li><a href="#learning-goals" id="toc-learning-goals" class="nav-link" data-scroll-target="#learning-goals">Learning goals</a></li>
  <li><a href="#expectations" id="toc-expectations" class="nav-link" data-scroll-target="#expectations">Expectations</a></li>
  <li><a href="#course-materials" id="toc-course-materials" class="nav-link" data-scroll-target="#course-materials">Course materials</a></li>
  </ul></li>
  <li><a href="#course-structure" id="toc-course-structure" class="nav-link" data-scroll-target="#course-structure">Course structure</a>
  <ul class="collapse">
  <li><a href="#coursework-and-grading" id="toc-coursework-and-grading" class="nav-link" data-scroll-target="#coursework-and-grading">Coursework and Grading</a></li>
  <li><a href="#late-coursework-policy" id="toc-late-coursework-policy" class="nav-link" data-scroll-target="#late-coursework-policy">Late coursework policy</a></li>
  </ul></li>
  <li><a href="#lecture-and-lab-calendar-and-topics-outline" id="toc-lecture-and-lab-calendar-and-topics-outline" class="nav-link" data-scroll-target="#lecture-and-lab-calendar-and-topics-outline">Lecture and lab calendar and topics outline</a>
  <ul class="collapse">
  <li><a href="#calendar" id="toc-calendar" class="nav-link" data-scroll-target="#calendar">Calendar</a></li>
  <li><a href="#course-outline" id="toc-course-outline" class="nav-link" data-scroll-target="#course-outline">Course outline</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Computational Social Science for Sustainability (EBS 181/281)</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="winter-2025" class="level2 unlisted">
<h2 class="unlisted anchored" data-anchor-id="winter-2025">Winter 2025</h2>
<section id="schedule-and-location" class="level3">
<h3 class="anchored" data-anchor-id="schedule-and-location">Schedule and location</h3>
<p>Monday lectures and Wednesday lab sections 11:30 AM - 12:50 PM in <a href="https://campus-map.stanford.edu/?srch=320-109#">320-109</a>, <a href="https://studentservices.stanford.edu/calendar/academic-dates/stanford-academic-calendar-2024-2025#winter25">Winter quarter 2025</a>.</p>
</section>
<section id="instructor" class="level3">
<h3 class="anchored" data-anchor-id="instructor">Instructor</h3>
<p>Dr.&nbsp;Matthew A. Turner, PhD (<a href="mailto:maturner@stanford.edu">email</a>)</p>
<p>Feel free to call me by my first name.</p>
<p>Please see my <a href="https://mt.digital">professional site</a> to learn more about me.</p>
</section>
<section id="office-hours" class="level3">
<h3 class="anchored" data-anchor-id="office-hours">Office hours</h3>
<ul>
<li>Monday and Tuesday 1 - 3 PM (Y2E2 352)</li>
<li>Thursday 3 - 4 PM (Zoom; link to be shared on Canvas)</li>
<li>By appointment</li>
</ul>
</section>
<section id="getting-help" class="level3">
<h3 class="anchored" data-anchor-id="getting-help">Getting help</h3>
<p>I recommend seeking help early if students feel stuck or lost. Please attend <a href="#office-hours">office hours</a>, <a href="mailto:maturner@stanford.edu">email me</a> to ask questions or set up a time to meet, or seek the help from other students.</p>
</section>
<section id="accessibility" class="level3">
<h3 class="anchored" data-anchor-id="accessibility">Accessibility</h3>
<p>Students who need an academic accommodation based on the impact of a disability must initiate the request with the <a href="https://oae.stanford.edu/">Office of Accessible Education (OAE)</a>. Professional staff will evaluate the request with required documentation, recommend reasonable accommodations, and prepare an Accommodation Letter for faculty. Unless the student has a temporary disability, Accommodation letters are issued for the entire academic year. Students should contact the OAE as soon as possible since timely notice is needed to coordinate accommodations. The OAE is located at 563 Salvatierra Walk (phone: 650-723-1066).</p>
</section>
</section>
<section id="course-overview" class="level2">
<h2 class="anchored" data-anchor-id="course-overview">Course overview</h2>
<p>The development and diffusion of sustainable innovations, cooperation for sustainable resource management, and political polarization that can undermine these, share a common explanation: these phenomena all emerge from repeated social interactions between individuals over time. These interactions take the form of social learning, social influence, or strategic economic cooperation.</p>
<p>Take this course to learn how to develop computational “experiments” of repeated social interaction that can be used to design more effective sustainability interventions and to analyze behavioral data. Students will learn transferrable technical skills in programming and mathematics. Students will deepen their interdisciplinary understanding of the social and behavioral sciences. With these skills and understanding, students will be empowered to create research products that analyze and evaluate potential sustainability interventions using computation.</p>
<section id="learning-goals" class="level3">
<h3 class="anchored" data-anchor-id="learning-goals">Learning goals</h3>
<p>Through participation in lecture and lab sections and completion of course activities, students will</p>
<ul>
<li>learn modern approaches to scientific modeling and statistical analysis of social behavior</li>
<li>learn to develop, implement, and analyze their own models for designing sustainability interventions</li>
<li>learn to write effective research papers using the Introduction, Model, Analysis, Discussion structure</li>
<li>improve their R programming skills, including the popular <a href="https://www.tidyverse.org/"><code>tidyverse</code></a>, for simulation modeling and data science <a href="https://r4ds.hadley.nz/">see the R for Data Science book</a> for more details.</li>
</ul>
</section>
<section id="expectations" class="level3">
<h3 class="anchored" data-anchor-id="expectations">Expectations</h3>
<p>Understanding mutual expectations can help everyone succeed. There are things you can expect of me and things I expect of enrolled students.</p>
<section id="what-you-can-expect-of-me" class="level4">
<h4 class="anchored" data-anchor-id="what-you-can-expect-of-me">What you can expect of me</h4>
<p>I will do my best to promote an encouraging, safe, and fair learning environment to promote student success. I will strive to understand and support student career goals coming from a diversity of life experiences.</p>
<p>You can expect I will be eager to help when needed, especially if you start from very little to no experience with math and programming. I understand that these subjects can cause anxiety for some.</p>
</section>
<section id="expectations-of-all-students" class="level4">
<h4 class="anchored" data-anchor-id="expectations-of-all-students">Expectations of all students</h4>
<p>Students are expected attend all scheduled course meetings unless there are extenuating circumstances. Please email if this occurs. Students are expected to seek help if they are struggling or stuck.</p>
</section>
<section id="expectations-of-graduate-students" class="level4">
<h4 class="anchored" data-anchor-id="expectations-of-graduate-students">Expectations of graduate students</h4>
<p>Graduate students will be required to complete an extra exercise on each problem set that will be extra credit for undergraduates. They will be held to higher standards for clarity, structure, and technical detail in midterm and final projects.</p>
</section>
<section id="honor-code" class="level4">
<h4 class="anchored" data-anchor-id="honor-code">Honor code</h4>
<p>You are expected to cite sources and individuals from whom you have learned and borrowed ideas as a display of academic, intellectual, and creative integrity. Failure to do so is a violation of Stanford’s Honor Code and is a serious offense, even when the violation is unintentional. Conduct prohibited by the Honor Code includes all forms of academic dishonesty, among them unpermitted collaboration and representing others’ work as one’s own. Please review the policies and guidance from the Office of Community Standards, and documentation and citation resources from the Hume Center for Writing and Speaking.</p>
</section>
</section>
<section id="course-materials" class="level3">
<h3 class="anchored" data-anchor-id="course-materials">Course materials</h3>
<p>Students will need a laptop or otherwise portable computer to bring to the Wednesday lab sections. There are a number of readings from journals and books (see the <a href="./#Calendar">Calendar</a> below), but these are either available through Stanford Libraries, or if not I will provide PDF copies via Canvas.</p>
</section>
</section>
<section id="course-structure" class="level2">
<h2 class="anchored" data-anchor-id="course-structure">Course structure</h2>
<p>Each week will have a Monday lecture on topics in computational social science for sustainability. Wednesday meetings will focus on developing programming, analysis, and writing skills in an interactive lab-section setting. In these Wednesday sections students will be introduced to problem sets and midterm and final projects, and have time to work together with the instructor and peers.</p>
<section id="coursework-and-grading" class="level3">
<h3 class="anchored" data-anchor-id="coursework-and-grading">Coursework and Grading</h3>
<p>Students will be evaluated based on their completion of six assignments worth 100 points total: four problem sets (10 points each), a midterm project (20 points), and a final project (40 points). Undergraduate students will have the opportunity for bonus points on each problem set.</p>
<ul>
<li><strong>Problem sets:</strong> There will be four problem sets introduced on Wednesdays during the computing lab section. Students will also have the opportunity to work together and ask the instructor questions during other lab sections before each assignment is due. (10 points per problem set)</li>
<li><strong>Midterm project:</strong> Students will write a report on how they will use a model from the course to address a sustainability problem of interest. The midterm project will be used as a foundation for the final project. (20 points)</li>
<li><strong>Final project:</strong> Students will expand on their midterm project, performing a detailed model analysis and discussing the implications of their results for designing sustainability interventions. (40 points)</li>
</ul>
</section>
<section id="late-coursework-policy" class="level3">
<h3 class="anchored" data-anchor-id="late-coursework-policy">Late coursework policy</h3>
<p>If there is a family or health emergency or other acute distress please contact me to make arrangements to submit late work without penalty. Otherwise the following policy applies:</p>
<ul>
<li>Problem sets up to 72 hours late can receive 50% credit.</li>
<li>Problem sets up to one week late can receive 20% credit.</li>
<li>The midterm project may be submitted up to one week late to receive 50% credit.</li>
<li>The final project may not be submitted late.</li>
<li>No credit will be given for work beyond one week late.</li>
</ul>
</section>
</section>
<section id="lecture-and-lab-calendar-and-topics-outline" class="level2">
<h2 class="anchored" data-anchor-id="lecture-and-lab-calendar-and-topics-outline">Lecture and lab calendar and topics outline</h2>
<section id="calendar" class="level3">
<h3 class="anchored" data-anchor-id="calendar">Calendar</h3>
<p>In the calendar below, PS stands for <em>problem set</em>. Subject to change.</p>
<table class="table table-sm">
<caption>
</caption><thead>
<tr>
<th text-align:="" center="" scope="col" width="100">
Week
</th>
<th scope="col">
Topic
</th>
<th scope="col">
Coursework
</th>
<th scope="col">
Readings
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
1, M 1/6 and W 1/8
</td>
<td>
What is social science, why <em>computation</em>, and how these can promote sustainability in socio-ecological systems.
</td>
<td>
<ul>
<li>
<strong>PS 1:</strong> R skills and basic social transmission models. <strong>Due 1/29 at 11:30 AM</strong>
</li>
</ul>
</td>
<td>
<ul>
<li>
<span class="citation" data-cites="SmaldinoBook2023">Smaldino (<a href="#ref-SmaldinoBook2023" role="doc-biblioref">2023</a>)</span>, Chs. 1 and 4
</li>
<li>
<span class="citation" data-cites="Ostrom2014">Ostrom (<a href="#ref-Ostrom2014" role="doc-biblioref">2014</a>)</span>
</li>
<li>
<span class="citation" data-cites="Cox2010">Cox, Arnold, and Tomás (<a href="#ref-Cox2010" role="doc-biblioref">2010</a>)</span>
</li>
</ul>
</td>
</tr>
<tr>
<td>
2, M 1/13 and W 1/15
</td>
<td>
The effect of social networks on sustainable innovation development and diffusion.
</td>
<td>
</td>
<td>
<ul>
<li>
<span class="citation" data-cites="Pisor2024">Pisor, Borgerhoff Mulder, and Smith (<a href="#ref-Pisor2024" role="doc-biblioref">2024</a>)</span>
</li>
<li>
<span class="citation" data-cites="Centola2022">Centola (<a href="#ref-Centola2022" role="doc-biblioref">2022</a>)</span>
</li>
<li>
<span class="citation" data-cites="Derex2016">Derex and Boyd (<a href="#ref-Derex2016" role="doc-biblioref">2016</a>)</span>
</li>
</ul>
</td>
</tr>
<tr>
<td>
3, W 1/22 (no class M 1/20)
</td>
<td>
How asymmetric preferences for within-group interaction can create sustainability-promoting social networks, and how to measure this in the real world.
</td>
<td>
<ul>
<li>
<strong>PS 2:</strong> How information and opinions spread in different social networks. <strong>Due 2/5 at 11:30 AM</strong>
</li>
</ul>
</td>
<td>
<ul>
<li>
<span class="citation" data-cites="Turner2023">Turner et al. (<a href="#ref-Turner2023" role="doc-biblioref">2023</a>)</span>
</li>
</ul>
</td>
</tr>
<tr>
<td>
4, M 1/29 and W 1/31
</td>
<td>
Common-pool resource management dilemmas: when and why do people cooperate? (Part I)
</td>
<td>
<ul>
<li>
<strong>PS 1 due 1/29 at 11:30 AM</strong>
</li>
</ul>
</td>
<td>
<ul>
<li>
<span class="citation" data-cites="Nowak2006">Nowak (<a href="#ref-Nowak2006" role="doc-biblioref">2006</a>)</span>
</li>
<li>
<span class="citation" data-cites="Andrews2018">J. Andrews and Borgerhoff Mulder (<a href="#ref-Andrews2018" role="doc-biblioref">2018</a>)</span>
</li>
</ul>
</td>
</tr>
<tr>
<td>
5, M 2/3 and W 2/5
</td>
<td>
Common-pool resource management dilemmas: when and why do people cooperate? (Part II)
</td>
<td>
<ul>
<li>
<strong>PS 2 due W 2/5 at 11:30 AM</strong>
</li>
<li>
<strong>Midterm project announced W 2/5, due 2/28 at 11:59 PM</strong>
</li>
</ul>
</td>
<td>
<ul>
<li>
<span class="citation" data-cites="Tavoni2011">Tavoni et al. (<a href="#ref-Tavoni2011" role="doc-biblioref">2011</a>)</span>
</li>
<li>
<span class="citation" data-cites="Jackson2008">Jackson (<a href="#ref-Jackson2008" role="doc-biblioref">2008</a>)</span>, Ch. 9, especially 9.2 and 9.3
</li>
</ul>
</td>
</tr>
<tr>
<td>
6, M 2/10 and W 2/12
</td>
<td>
How to perform and report computational social model analyses.
</td>
<td>
<ul>
<li>
<strong>PS 3:</strong> The evolution of institutions for sustainable property rights. <strong>Due W 2/19 at 11:30 AM</strong>
</li>
</ul>
</td>
<td>
</td>
</tr>
<tr>
<td>
7, W 2/19 (no class M 2/17)
</td>
<td>
Institutions support cooperation by balancing variation and homogeneity within and between stakeholder groups.
</td>
<td>
<ul>
<li>
<strong>Final project announced, due M 3/17 at 11:59 PM</strong>
</li>
</ul>
</td>
<td>
<ul>
<li>
<span class="citation" data-cites="Waring2015">Waring et al. (<a href="#ref-Waring2015" role="doc-biblioref">2015</a>)</span>
</li>
<li>
<span class="citation" data-cites="Waring2017">Waring, Goff, and Smaldino (<a href="#ref-Waring2017" role="doc-biblioref">2017</a>)</span>
</li>
<li>
<span class="citation" data-cites="Andrews2024">Jeffrey Andrews et al. (<a href="#ref-Andrews2024" role="doc-biblioref">2024</a>)</span>
</li>
</ul>
</td>
</tr>
<tr>
<td>
8, M 2/24 and W 2/26
</td>
<td>
How computational social science can promote sustainability, through the lens of the Price equation.
</td>
<td>
<ul>
<li>
<strong>PS 3 due W 2/26 at 11:30 AM</strong>
</li>
</ul>
</td>
<td>
<ul>
<li>
<span class="citation" data-cites="Deffner2024">Deffner et al. (<a href="#ref-Deffner2024" role="doc-biblioref">2024</a>)</span>
</li>
<li>
<span class="citation" data-cites="Bak-Coleman2021">Bak-Coleman et al. (<a href="#ref-Bak-Coleman2021" role="doc-biblioref">2021</a>)</span>
</li>
</ul>
</td>
</tr>
<tr>
<td>
9, M 3/3 and W 3/5
</td>
<td>
Social influence represented as forces causing opinion dynamics.
</td>
<td>
<ul>
<li>
<strong>PS 4:</strong> Predicting polarization and measuring opinion change. <strong>Due F 3/14 at 5 PM</strong>
</li>
</ul>
</td>
<td>
<ul>
<li>
<span class="citation" data-cites="Turner2018">Turner and Smaldino (<a href="#ref-Turner2018" role="doc-biblioref">2018</a>)</span>
</li>
<li>
<span class="citation" data-cites="SmaldinoBook2023">Smaldino (<a href="#ref-SmaldinoBook2023" role="doc-biblioref">2023</a>, Ch. 6)</span>
</li>
</ul>
</td>
</tr>
<tr>
<td>
10, M 3/10 and W 3/12
</td>
<td>
Opinion dynamics in the context of sustainability. Experimental design and measurement in opinion dynamics experiments.
</td>
<td>
<ul>
<li>
<strong>PS 4 Due F 3/14 at 5 PM</strong>
</li>
<li>
<strong>Final project due W 3/19 at 11:30 AM</strong>
</li>
</ul>
</td>
<td>
<ul>
<li>
<span class="citation" data-cites="Liddell2018">Liddell and Kruschke (<a href="#ref-Liddell2018" role="doc-biblioref">2018</a>)</span>
</li>
<li>
<span class="citation" data-cites="GalesicEtAl2023">Galesic et al. (<a href="#ref-GalesicEtAl2023" role="doc-biblioref">2023</a>)</span>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="course-outline" class="level3">
<h3 class="anchored" data-anchor-id="course-outline">Course outline</h3>
<ol type="1">
<li><p>Computational social science can help design sustainability interventions. Social science theory provides models of repeated human interaction over time that can be used, for example, to represent <a href="https://earthbound.report/2018/01/15/elinor-ostroms-8-rules-for-managing-the-commons/">Ostrom’s eight “design principles” for sustainable socio-ecological systems</a>.</p>
<ul>
<li>Lab: Introducing the <em>80% success rate</em> exercise, “How much advertising is necessary for an 80% success rate in spreading a sustainable innovation in groups, given population size and average number of acquaintances of people in the group?”</li>
</ul></li>
<li><p>How human psychology, groups, and social networks can promote or inhibit the diffusion of sustainable innovations, Part I: single-group social networks.</p>
<ul>
<li>Lab: Could innovation-supporting social networks also promote inequality <span class="citation" data-cites="Moser2023">(<a href="#ref-Moser2023" role="doc-biblioref">Moser and Smaldino 2023</a>)</span>?</li>
</ul></li>
<li><p>How human psychology, groups, and social networks can promote or inhibit the diffusion of sustainable innovations, Part II: two-group (or more) social networks, i.e., <em>metapopulation</em> social networks.</p>
<ul>
<li><p>Lab I: 80% success rate exercise with two-group social networks defined by each group’s <em>homophily</em> level, i.e., tendency of group members to interact with others from their own group <span class="citation" data-cites="Turner2023">(<a href="#ref-Turner2023" role="doc-biblioref">Turner et al. 2023</a>)</span>.</p></li>
<li><p>Lab II: Use stochastic block model to infer networks from data <span class="citation" data-cites="DeBacco2023 Ross2024">(<a href="#ref-DeBacco2023" role="doc-biblioref">De Bacco et al. 2023</a>; <a href="#ref-Ross2024" role="doc-biblioref">Ross, McElreath, and Redhead 2024</a>)</span>.</p></li>
</ul></li>
<li><p>Social influence: understanding the effect of rhetoric as a force that acts on opinions and beliefs. How to measure opinion dynamics and</p>
<ul>
<li>Lab I: When is polarization path-dependent and therefore possible to avoid <span class="citation" data-cites="Turner2018">(<a href="#ref-Turner2018" role="doc-biblioref">Turner and Smaldino 2018</a>)</span>?</li>
<li>Lab II: Opinion dynamics measurement depends on accurate inference using categorical (Likert-style) observational data <span class="citation" data-cites="Liddell2018">(<a href="#ref-Liddell2018" role="doc-biblioref">Liddell and Kruschke 2018</a>)</span>.</li>
</ul></li>
<li><p>The emergence of cooperation via reciprocity: application to groundwater sustainability. How to predict and restrict potential free-riding based on marginal utility in managing common pool resources using game theory (see <span class="citation" data-cites="Jackson2008">Jackson (<a href="#ref-Jackson2008" role="doc-biblioref">2008</a>)</span>).</p>
<ul>
<li>Lab I: “Groundwater sharing dilemma” (as we’ll call it, though it’s just a re-telling of the famous <a href="https://en.wikipedia.org/wiki/Prisoner%27s_dilemma">prisoners’ dilemma</a>)</li>
<li>Lab II: Agent-based model of behavioral study of “avoidance of disastrous climate change in a public goods game” by <span class="citation" data-cites="Tavoni2011">Tavoni et al. (<a href="#ref-Tavoni2011" role="doc-biblioref">2011</a>)</span></li>
</ul></li>
<li><p>Ideal institutions support human cooperation by balancing variation and maintenance of beneficial behaviors within and between stakeholder groups <span class="citation" data-cites="Richerson2016d Waring2015">(<a href="#ref-Richerson2016d" role="doc-biblioref">Richerson et al. 2016</a>; <a href="#ref-Waring2015" role="doc-biblioref">Waring et al. 2015</a>)</span>. Example: sustainable agricultural practices like crop switching <span class="citation" data-cites="Waring2023 Kling2024">(<a href="#ref-Waring2023" role="doc-biblioref">Waring et al. 2023</a>; <a href="#ref-Kling2024" role="doc-biblioref">Kling et al. 2024</a>)</span>.</p>
<ul>
<li>Lab I: The evolution of property rights supports sustainability <span class="citation" data-cites="Waring2017">(<a href="#ref-Waring2017" role="doc-biblioref">Waring, Goff, and Smaldino 2017</a>)</span>. What sorts of social networks evolve? Could alternatives better promote or inhibit the development and diffusion of innovations?</li>
</ul></li>
</ol>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Andrews2018" class="csl-entry" role="listitem">
Andrews, J., and M. Borgerhoff Mulder. 2018. <span>“<span class="nocase">Cultural group selection and the design of REDD+: insights from Pemba</span>.”</span> <em>Sustainability Science</em> 13 (1): 93–107. <a href="https://doi.org/10.1007/s11625-017-0489-2">https://doi.org/10.1007/s11625-017-0489-2</a>.
</div>
<div id="ref-Andrews2024" class="csl-entry" role="listitem">
Andrews, Jeffrey, Matthew Clark, Vicken Hillis, and Monique Borgerhoff Mulder. 2024. <span>“<span class="nocase">The cultural evolution of collective property rights for sustainable resource governance</span>.”</span> <em>Nature Sustainability</em>. <a href="https://doi.org/10.1038/s41893-024-01290-1">https://doi.org/10.1038/s41893-024-01290-1</a>.
</div>
<div id="ref-Bak-Coleman2021" class="csl-entry" role="listitem">
Bak-Coleman, Joseph B., Mark Alfano, Wolfram Barfuss, Carl T. Bergstrom, Miguel A. Centeno, Iain D. Couzin, Jonathan F. Donges, et al. 2021. <span>“<span class="nocase">Stewardship of global collective behavior</span>.”</span> <em>Proceedings of the National Academy of Sciences of the United States of America</em> 118 (27): 1–10. <a href="https://doi.org/10.1073/pnas.2025764118">https://doi.org/10.1073/pnas.2025764118</a>.
</div>
<div id="ref-Centola2022" class="csl-entry" role="listitem">
Centola, Damon. 2022. <span>“<span class="nocase">The network science of collective intelligence</span>.”</span> <em>Trends in Cognitive Sciences</em> 26 (11): 923–41. <a href="https://doi.org/10.1016/j.tics.2022.08.009">https://doi.org/10.1016/j.tics.2022.08.009</a>.
</div>
<div id="ref-Cox2010" class="csl-entry" role="listitem">
Cox, Michael, Gwen Arnold, and Sergio Villamayor Tomás. 2010. <span>“<span class="nocase">A review of design principles for community-based natural resource management</span>.”</span> <em>Ecology and Society</em> 15 (4). <a href="https://doi.org/10.5751/ES-03704-150438">https://doi.org/10.5751/ES-03704-150438</a>.
</div>
<div id="ref-DeBacco2023" class="csl-entry" role="listitem">
De Bacco, Caterina, Martina Contisciani, Jonathan Cardoso-Silva, Hadiseh Safdari, Gabriela Lima Borges, Diego Baptista, Tracy Sweet, et al. 2023. <span>“<span class="nocase">Latent network models to account for noisy, multiply reported social network data</span>.”</span> <em>Journal of the Royal Statistical Society Series A: Statistics in Society</em> 186 (3): 355–75. <a href="https://doi.org/10.1093/jrsssa/qnac004">https://doi.org/10.1093/jrsssa/qnac004</a>.
</div>
<div id="ref-Deffner2024" class="csl-entry" role="listitem">
Deffner, Dominik, Natalia Fedorova, Jeffrey Andrews, and Richard McElreath. 2024. <span>“<span class="nocase">Bridging theory and data: A computational workflow for cultural evolution</span>.”</span> <em>Proceedings of the National Academy of Sciences of the United States of America</em> 121 (48): 1–11. <a href="https://doi.org/10.1073/pnas.2322887121">https://doi.org/10.1073/pnas.2322887121</a>.
</div>
<div id="ref-Derex2016" class="csl-entry" role="listitem">
Derex, Maxime, and Robert Boyd. 2016. <span>“<span class="nocase">Partial connectivity increases cultural accumulation within groups</span>.”</span> <em>Proceedings of the National Academy of Sciences of the United States of America</em> 113 (11): 2982–87. <a href="https://doi.org/10.1073/pnas.1518798113">https://doi.org/10.1073/pnas.1518798113</a>.
</div>
<div id="ref-GalesicEtAl2023" class="csl-entry" role="listitem">
Galesic, Mirta, Daniel Barkoczi, Andrew M. Berdhal, Dora Biro, Giuseppe Carbone, Ilaria Giannoccaro, Robert L. Goldstone, et al. 2023. <span>“<span class="nocase">Beyond collective intelligence : Collective adaptation</span>.”</span> <em>Journal of the Royal Society Interface</em> 20 (20220736). <a href="https://doi.org/10.1098/rsif.2022.0736">https://doi.org/10.1098/rsif.2022.0736</a>.
</div>
<div id="ref-Jackson2008" class="csl-entry" role="listitem">
Jackson, Matthew O. 2008. <em><span class="nocase">Social and Economic Networks</span></em>. Princeton: Princeton University Press. <a href="https://press.princeton.edu/books/paperback/9780691148205/social-and-economic-networks">https://press.princeton.edu/books/paperback/9780691148205/social-and-economic-networks</a>.
</div>
<div id="ref-Kling2024" class="csl-entry" role="listitem">
Kling, Matthew M., Christopher T. Brittain, Gillian L. Galford, Timothy M. Waring, Laurent Hébert-Dufresne, Matthew P. Dube, Hossein Sabzian, Nicholas J. Gotelli, Brian J. McGill, and Meredith T. Niles. 2024. <span>“<span class="nocase">Innovations through crop switching happen on the diverse margins of US agriculture</span>.”</span> <em>Proceedings of the National Academy of Sciences of the United States of America</em> 121 (42): 1–10. <a href="https://doi.org/10.1073/pnas.2402195121">https://doi.org/10.1073/pnas.2402195121</a>.
</div>
<div id="ref-Liddell2018" class="csl-entry" role="listitem">
Liddell, Torrin M., and John K. Kruschke. 2018. <span>“<span class="nocase">Analyzing ordinal data with metric models: What could possibly go wrong?</span>”</span> <em>Journal of Experimental Social Psychology</em> 79: 328–48. <a href="https://doi.org/10.1016/j.jesp.2018.08.009">https://doi.org/10.1016/j.jesp.2018.08.009</a>.
</div>
<div id="ref-Moser2023" class="csl-entry" role="listitem">
Moser, Cody, and Paul E. Smaldino. 2023. <span>“<span class="nocase">Innovation-facilitating networks create inequality</span>.”</span> <em>Proceedings of the Royal Society B: Biological Sciences</em> 290 (2011). <a href="https://doi.org/10.1098/rspb.2023.2281">https://doi.org/10.1098/rspb.2023.2281</a>.
</div>
<div id="ref-Nowak2006" class="csl-entry" role="listitem">
Nowak, Martin A. 2006. <span>“<span class="nocase">Evolution of virulence</span>.”</span> In <em>Evolutionary Dynamics: Exploring the Equations of Life</em>, 384. Harvard University Press. <a href="https://doi.org/10.1016/S0891-5520(03)00099-0">https://doi.org/10.1016/S0891-5520(03)00099-0</a>.
</div>
<div id="ref-Ostrom2014" class="csl-entry" role="listitem">
Ostrom, Elinor. 2014. <span>“<span class="nocase">Collective action and the evolution of social norms</span>.”</span> <em>Journal of Natural Resources Policy Research</em> 6 (4): 235–52. <a href="https://doi.org/10.1080/19390459.2014.935173">https://doi.org/10.1080/19390459.2014.935173</a>.
</div>
<div id="ref-Pisor2024" class="csl-entry" role="listitem">
Pisor, Anne C., Monique Borgerhoff Mulder, and Kristopher M. Smith. 2024. <span>“<span class="nocase">Long-distance social relationships can both undercut and promote local natural resource management</span>.”</span> <em>Philosophical Transactions of the Royal Society B: Biological Sciences</em> 379 (1893). <a href="https://doi.org/10.1098/rstb.2022.0269">https://doi.org/10.1098/rstb.2022.0269</a>.
</div>
<div id="ref-Richerson2016d" class="csl-entry" role="listitem">
Richerson, Peter, Ryan Baldini, Adrian V. Bell, Kathryn Demps, Karl Frost, Vicken Hillis, Sarah Mathew, et al. 2016. <span>“<span class="nocase">Cultural group selection plays an essential role in explaining human cooperation: A sketch of the evidence</span>.”</span> <em>Behavioral and Brain Sciences</em> 39 (2016): e30. <a href="https://doi.org/10.1017/S0140525X1400106X">https://doi.org/10.1017/S0140525X1400106X</a>.
</div>
<div id="ref-Ross2024" class="csl-entry" role="listitem">
Ross, Cody T., Richard McElreath, and Daniel Redhead. 2024. <span>“<span class="nocase">Modelling animal network data in R using STRAND</span>.”</span> <em>Journal of Animal Ecology</em> 93 (3): 254–66. <a href="https://doi.org/10.1111/1365-2656.14021">https://doi.org/10.1111/1365-2656.14021</a>.
</div>
<div id="ref-SmaldinoBook2023" class="csl-entry" role="listitem">
Smaldino, Paul E. 2023. <em><span class="nocase">Modeling Social Behavior: Mathematical and Agent-based Models of Social Dynamics and Cultural Evolution</span></em>. Princeton: Princeton University Press.
</div>
<div id="ref-Tavoni2011" class="csl-entry" role="listitem">
Tavoni, Alessandro, Astrid Dannenberg, Giorgos Kallis, and Andreas Löschel. 2011. <span>“<span class="nocase">Inequality, communication, and the avoidance of disastrous climate change in a public goods game</span>.”</span> <em>Proceedings of the National Academy of Sciences of the United States of America</em> 108 (29): 11825–29. <a href="https://doi.org/10.1073/pnas.1102493108">https://doi.org/10.1073/pnas.1102493108</a>.
</div>
<div id="ref-Turner2023" class="csl-entry" role="listitem">
Turner, Matthew A., Alyson L. Singleton, Mallory J. Harris, Ian Harryman, Cesar Augusto Lopez, Ronan Forde Arthur, Caroline Muraida, and James Holland Jones. 2023. <span>“<span class="nocase">Minority-group incubators and majority-group reservoirs support the diffusion of climate change adaptations</span>.”</span> <em>Philosophical Transactions of the Royal Society B: Biological Sciences</em> 378 (1889). <a href="https://doi.org/10.1098/rstb.2022.0401">https://doi.org/10.1098/rstb.2022.0401</a>.
</div>
<div id="ref-Turner2018" class="csl-entry" role="listitem">
Turner, Matthew A., and Paul E. Smaldino. 2018. <span>“<span class="nocase">Paths to Polarization: How Extreme Views, Miscommunication, and Random Chance Drive Opinion Dynamics</span>.”</span> <em>Complexity</em>. <a href="https://doi.org/10.1155/2018/2740959">https://doi.org/10.1155/2018/2740959</a>.
</div>
<div id="ref-Waring2017" class="csl-entry" role="listitem">
Waring, Timothy M., Sandra H. Goff, and Paul E. Smaldino. 2017. <span>“<span class="nocase">The coevolution of economic institutions and sustainable consumption via cultural group selection</span>.”</span> <em>Ecological Economics</em> 131: 524–32. <a href="https://doi.org/10.1016/j.ecolecon.2016.09.022">https://doi.org/10.1016/j.ecolecon.2016.09.022</a>.
</div>
<div id="ref-Waring2015" class="csl-entry" role="listitem">
Waring, Timothy M., Michelle Ann Kline, Jeremy S. Brooks, Sandra H. Goff, John Gowdy, Marco A. Janssen, Paul E. Smaldino, and Jennifer Jacquet. 2015. <span>“<span class="nocase">A multilevel evolutionary framework for sustainability analysis</span>.”</span> <em>Ecology and Society</em> 20 (2). <a href="https://doi.org/10.5751/ES-07634-200234">https://doi.org/10.5751/ES-07634-200234</a>.
</div>
<div id="ref-Waring2023" class="csl-entry" role="listitem">
Waring, Timothy M., Meredith T. Niles, Matthew M. Kling, Stephanie N. Miller, Laurent Hébert-Dufresne, Hossein Sabzian, Nicholas Gotelli, and Brian J. McGill. 2023. <span>“<span class="nocase">Operationalizing cultural adaptation to climate change: Contemporary examples from United States agriculture</span>.”</span> <em>Philosophical Transactions of the Royal Society B: Biological Sciences</em> 378 (1889). <a href="https://doi.org/10.1098/rstb.2022.0397">https://doi.org/10.1098/rstb.2022.0397</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>